================================================================================
                    GenerateSDBAgent í”„ë¡œì íŠ¸ ìƒì„¸ ë¶„ì„ ë³´ê³ ì„œ
================================================================================
ë¶„ì„ ì¼ì: 2024-12-25
ë¶„ì„ ë²”ìœ„: ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜, ì›Œí¬í”Œë¡œìš°, êµ¬í˜„ ì„¸ë¶€ì‚¬í•­
ë¶„ì„ ëŒ€ìƒ: Jira ì›¹í›… â†’ Flask App â†’ Bitbucket API â†’ LLM ì½”ë“œ ìƒì„± ìë™í™” ì‹œìŠ¤í…œ

================================================================================
ğŸ“‹ ëª©ì°¨
================================================================================
1. í”„ë¡œì íŠ¸ ê°œìš” ë° ì‹œë‚˜ë¦¬ì˜¤
2. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
3. ë‹¨ê³„ë³„ ìƒì„¸ ë™ì‘ ë¶„ì„
4. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ë³„ ì„¸ë¶€ êµ¬í˜„
5. ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜
6. ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ
7. ê°œì„  ì œì•ˆì‚¬í•­

================================================================================
1. í”„ë¡œì íŠ¸ ê°œìš” ë° ì‹œë‚˜ë¦¬ì˜¤
================================================================================

1.1 ì „ì²´ ì‹œë‚˜ë¦¬ì˜¤ í”Œë¡œìš°
------------------------
ì‚¬ìš©ìê°€ Jiraì—ì„œ SDB(Screen Definition Block) ê´€ë ¨ ì´ìŠˆë¥¼ ìƒì„±í•˜ë©´,
ìë™ìœ¼ë¡œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë¶„ì„í•˜ê³  ìˆ˜ì •í•˜ì—¬ Pull Requestê¹Œì§€ ìƒì„±í•˜ëŠ” ì™„ì „ ìë™í™” ì‹œìŠ¤í…œ

ë‹¨ê³„ë³„ íë¦„:
1. Jira ì´ìŠˆ ìƒì„± (SDB ê°œë°œ ìš”ì²­)
2. Jira â†’ ì›¹í›… ë°œí–‰ (jira:issue_created)
3. Docker ì»¨í…Œì´ë„ˆì—ì„œ Flask App ì‹¤í–‰
4. Flask Appì—ì„œ ì›¹í›… ìˆ˜ì‹  ë° ì²˜ë¦¬
5. IssueProcessorì—ì„œ ì „ì²´ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰:
   - LLMì„ í†µí•œ ì´ìŠˆ ìš”ì•½ ë° ë¶„ì„
   - Bitbucket APIë¡œ ìƒˆ ë¸Œëœì¹˜ ìƒì„±
   - í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„
   - LLMì„ í†µí•œ ì½”ë“œ ìˆ˜ì •/ìƒì„±
   - ë³€ê²½ì‚¬í•­ ì»¤ë°‹
   - Pull Request ìƒì„±

1.2 í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°
--------------------------
GenerateSDBAgent/
â”œâ”€â”€ app/                    # Flask ì• í”Œë¦¬ì¼€ì´ì…˜ ì†ŒìŠ¤
â”‚   â”œâ”€â”€ main.py            # ë©”ì¸ Flask ì•± (ì›¹í›… ìˆ˜ì‹ )
â”‚   â”œâ”€â”€ bitbucket_api.py   # Bitbucket REST API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ llm_handler.py     # OpenAI LLM ì²˜ë¦¬
â”‚   â””â”€â”€ issue_processor.py # ì´ìŠˆ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš°
â”œâ”€â”€ .env                   # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
â”œâ”€â”€ requirements.txt       # Python ì˜ì¡´ì„±
â”œâ”€â”€ Dockerfile            # Docker ì´ë¯¸ì§€ ë¹Œë“œ
â”œâ”€â”€ docker-compose.yml    # ë¡œì»¬ ê°œë°œ í™˜ê²½
â”œâ”€â”€ Procfile              # í”„ë¡œë•ì…˜ ë°°í¬ ì„¤ì •
â”œâ”€â”€ few_shot_examples.json # LLM Few-shot í•™ìŠµ ì˜ˆì œ
â””â”€â”€ sample_jira_webhook.json # ì›¹í›… í…ŒìŠ¤íŠ¸ ë°ì´í„°

================================================================================
2. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
================================================================================

2.1 ì»´í¬ë„ŒíŠ¸ ë‹¤ì´ì–´ê·¸ë¨
----------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Jira Issue    â”‚â”€â”€â”€â–¶â”‚  Flask Webhook  â”‚â”€â”€â”€â–¶â”‚ Issue Processor â”‚
â”‚   Created       â”‚    â”‚    Receiver     â”‚    â”‚   Workflow      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                    â”‚  Bitbucket API  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚   - Branches    â”‚                â”‚
                    â”‚   - Files       â”‚                â”‚
                    â”‚   - Commits     â”‚                â”‚
                    â”‚   - Pull Reqs   â”‚                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
                                                        â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
                    â”‚   LLM Handler   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚  - OpenAI API   â”‚
                    â”‚  - Code Gen     â”‚
                    â”‚  - Analysis     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2.2 ê¸°ìˆ  ìŠ¤íƒ
-------------
ë°±ì—”ë“œ:
- Flask 3.0.0: ì›¹í›… ìˆ˜ì‹  ë° REST API
- Gunicorn 21.2.0: í”„ë¡œë•ì…˜ WSGI ì„œë²„
- Requests: HTTP í´ë¼ì´ì–¸íŠ¸

AI/ML:
- OpenAI GPT-4o-mini: ì½”ë“œ ìƒì„± ë° ë¶„ì„
- Few-shot Learning: ë„ë©”ì¸ íŠ¹í™” íŒ¨í„´ í•™ìŠµ

DevOps:
- Docker: ì»¨í…Œì´ë„ˆí™”
- Docker Compose: ë©€í‹° ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- Cloudflare Tunnel: ì™¸ë¶€ ì ‘ê·¼

ì™¸ë¶€ ì—°ë™:
- Jira REST API: ì´ìŠˆ ê´€ë¦¬
- Bitbucket REST API: ì†ŒìŠ¤ ì½”ë“œ ê´€ë¦¬
- OpenAI API: ìì—°ì–´ ì²˜ë¦¬

================================================================================
3. ë‹¨ê³„ë³„ ìƒì„¸ ë™ì‘ ë¶„ì„
================================================================================

3.1 Flask App ì´ˆê¸°í™” (app/main.py)
-----------------------------------
ì‹¤í–‰ ìˆœì„œ:
1. í™˜ê²½ë³€ìˆ˜ ë¡œë“œ (.env íŒŒì¼ì—ì„œ)
   - BITBUCKET_URL, BITBUCKET_USERNAME, BITBUCKET_ACCESS_TOKEN
   - BITBUCKET_WORKSPACE, BITBUCKET_REPOSITORY
   - OPENAI_API_KEY

2. ë¡œê¹… ì‹œìŠ¤í…œ ì´ˆê¸°í™”
   logging.basicConfig(level=logging.INFO)

3. API í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
   - BitbucketAPI í´ë¼ì´ì–¸íŠ¸ ìƒì„±
   - LLMHandler ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
   - IssueProcessor ì›Œí¬í”Œë¡œìš° ì—”ì§„ ìƒì„±

4. í† í° ìœ íš¨ì„± ì‚¬ì „ ê²€ì¦
   GET /2.0/user APIë¡œ Bitbucket í† í° ê²€ì¦

5. Flask ë¼ìš°íŒ… ì„¤ì •
   - GET /health: í—¬ìŠ¤ì²´í¬
   - POST /webhook: Jira ì›¹í›… ìˆ˜ì‹ 
   - POST /process-issue: ìˆ˜ë™ ì²˜ë¦¬ (í…ŒìŠ¤íŠ¸ìš©)

6. 5000ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ ì‹œì‘

3.2 ì›¹í›… ìˆ˜ì‹  ë° í•„í„°ë§ ë¡œì§
-----------------------------
@app.route('/webhook', methods=['POST'])ì—ì„œ:

1. JSON í˜ì´ë¡œë“œ ì¶”ì¶œ ë° ê²€ì¦
   payload = request.get_json()
   if not payload: return 400

2. ì´ë²¤íŠ¸ íƒ€ì… í™•ì¸
   webhook_event = payload.get('webhookEvent')
   if webhook_event != 'jira:issue_created': return ignored

3. SDB ê´€ë ¨ ì´ìŠˆì¸ì§€ í™•ì¸
   issue_type = issue.get('fields', {}).get('issuetype', {}).get('name', '')
   issue_summary = issue.get('fields', {}).get('summary', '')

   if 'SDB' in issue_type or 'SDB ê°œë°œ' in issue_summary:
       # ì²˜ë¦¬ ì‹œì‘
   else:
       # ë¬´ì‹œ

4. ì´ìŠˆ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
   result = issue_processor.process_issue(issue)

3.3 Bitbucket API ì—°ë™ ì„¸ë¶€ì‚¬í•­ (app/bitbucket_api.py)
-----------------------------------------------------
ì¸ì¦ ë°©ì‹:
- Bearer Token ìš°ì„  ì‹œë„: Authorization: Bearer {access_token}
- Basic Auth í´ë°±: auth=(username, access_token)

ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸:
1. í† í° ê²€ì¦: GET /2.0/user
2. ë¸Œëœì¹˜ ì¡°íšŒ: GET /2.0/repositories/{workspace}/{repo}/refs/branches/{name}
3. ë¸Œëœì¹˜ ìƒì„±: POST /2.0/repositories/{workspace}/{repo}/refs/branches
4. íŒŒì¼ ë‚´ìš© ì¡°íšŒ: GET /2.0/repositories/{workspace}/{repo}/src/{branch}/{path}
5. ë””ë ‰í† ë¦¬ ëª©ë¡: GET /2.0/repositories/{workspace}/{repo}/src/{branch}/{path}
6. íŒŒì¼ ì»¤ë°‹: POST /2.0/repositories/{workspace}/{repo}/src
7. PR ìƒì„±: POST /2.0/repositories/{workspace}/{repo}/pullrequests

ë¸Œëœì¹˜ ìƒì„± í”„ë¡œì„¸ìŠ¤:
1. ê¸°ì¤€ ë¸Œëœì¹˜(master/main)ì˜ ìµœì‹  ì»¤ë°‹ í•´ì‹œ ì¡°íšŒ
2. ìƒˆ ë¸Œëœì¹˜ ìƒì„±: feature/sdb-{issue_key}-{timestamp}

ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜:
- ìµœëŒ€ 3íšŒ ì¬ì‹œë„
- ì§€ìˆ˜ ë°±ì˜¤í”„: 1ì´ˆ, 2ì´ˆ, 4ì´ˆ ê°„ê²©

3.4 LLM ì²˜ë¦¬ ë¡œì§ (app/llm_handler.py)
--------------------------------------
ì´ˆê¸°í™”:
- OpenAI API í‚¤ í™•ì¸
- í‚¤ ì—†ìœ¼ë©´ Mock ëª¨ë“œë¡œ ìë™ ì „í™˜
- GPT-4o-mini ëª¨ë¸ ì‚¬ìš© (ê¸°ë³¸ê°’)
- íƒ€ì„ì•„ì›ƒ: 60ì´ˆ

í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§:
1. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸: ì—­í•  ì •ì˜ ë° SDB ë„ë©”ì¸ ì§€ì‹
2. Few-shot ì˜ˆì œ: few_shot_examples.jsonì—ì„œ ë¡œë“œ
3. ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸: êµ¬ì²´ì  ìš”êµ¬ì‚¬í•­ê³¼ í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸

ì£¼ìš” ê¸°ëŠ¥:
- analyze_project_structure(): ìˆ˜ì • ëŒ€ìƒ íŒŒì¼ ë¶„ì„
- generate_code_modification(): ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •
- generate_new_file(): ìƒˆ íŒŒì¼ ìƒì„±
- summarize_issue(): ì´ìŠˆ ë‚´ìš© ìš”ì•½

ì‘ë‹µ íŒŒì‹±:
- JSON í˜•ì‹ ì‘ë‹µ íŒŒì‹±
- ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ (```) ì¶”ì¶œ
- ì–¸ì–´ ì§€ì •ì ì œê±° (python, java, etc.)

Mock ëª¨ë“œ:
- API í‚¤ ì—†ê±°ë‚˜ ì—ëŸ¬ ì‹œ ìë™ í™œì„±í™”
- SDB ê´€ë ¨ ê¸°ë³¸ í…œí”Œë¦¿ ì‘ë‹µ ì œê³µ
- ê°œë°œ/í…ŒìŠ¤íŠ¸ í¸ì˜ì„± ì œê³µ

3.5 ì´ìŠˆ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš° (app/issue_processor.py)
-------------------------------------------------
ì „ì²´ í”„ë¡œì„¸ìŠ¤ (process_issue ë©”ì„œë“œ):

1. ì´ìŠˆ ë‚´ìš© ìš”ì•½
   issue_summary = llm_handler.summarize_issue(issue)

2. ë¸Œëœì¹˜ ìƒì„±
   branch_name = f"feature/sdb-{issue_key}-{timestamp}"
   bitbucket_api.create_branch(branch_name)

3. í”„ë¡œì íŠ¸ êµ¬ì¡° ë¶„ì„
   structure = bitbucket_api.analyze_project_structure(branch_name)

4. ìˆ˜ì • ëŒ€ìƒ íŒŒì¼ ë¶„ì„ (LLM)
   analysis = llm_handler.analyze_project_structure(structure, issue_summary)
   # ê²°ê³¼: files_to_modify, new_files_needed, modification_strategy

5. ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •
   for file_path in analysis['files_to_modify']:
       current_content = bitbucket_api.get_file_content(file_path, branch_name)
       modified_content = llm_handler.generate_code_modification(...)
       bitbucket_api.commit_file(branch_name, file_path, modified_content,
                                f"[{issue_key}] {file_path} ìˆ˜ì • - SDB ê¸°ëŠ¥ ì¶”ê°€")

6. ìƒˆ íŒŒì¼ ìƒì„±
   for file_path in analysis['new_files_needed']:
       new_content = llm_handler.generate_new_file(...)
       bitbucket_api.commit_file(branch_name, file_path, new_content,
                                f"[{issue_key}] {file_path} ìƒì„± - SDB ê¸°ëŠ¥ ì¶”ê°€")

7. Pull Request ìƒì„±
   pr_description = _generate_pr_description(issue, modified_files, analysis)
   pr_data = bitbucket_api.create_pull_request(
       source_branch=branch_name,
       destination_branch="master",
       title=f"[{issue_key}] {issue_summary}",
       description=pr_description
   )

8. ê²°ê³¼ ë°˜í™˜
   return {
       'success': True,
       'branch_name': branch_name,
       'pr_url': pr_data['links']['html']['href'],
       'modified_files': modified_files,
       'analysis_result': analysis
   }

================================================================================
4. í•µì‹¬ ì»´í¬ë„ŒíŠ¸ë³„ ì„¸ë¶€ êµ¬í˜„
================================================================================

4.1 Docker ì„¤ì •
---------------
Dockerfile:
- ë² ì´ìŠ¤ ì´ë¯¸ì§€: python:3.11-slim
- ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€: git, curl (í—¬ìŠ¤ì²´í¬ìš©)
- Python íŒ¨í‚¤ì§€: requirements.txt
- í¬íŠ¸: 5000
- ì‹¤í–‰ ëª…ë ¹: python app/main.py

docker-compose.yml (ê°œë°œí™˜ê²½):
- sdb-agent ì„œë¹„ìŠ¤: Flask ì•±
  * í¬íŠ¸: 5000:5000
  * ë³¼ë¥¨: . â†’ /app (ì‹¤ì‹œê°„ ì½”ë“œ ë°˜ì˜)
  * í™˜ê²½: .env íŒŒì¼
  * í—¬ìŠ¤ì²´í¬: curl http://localhost:5000/health
- ngrok ì„œë¹„ìŠ¤ (ì„ íƒ): ì™¸ë¶€ í„°ë„ë§

docker-compose.cloudflare.yml (í”„ë¡œë•ì…˜):
- Cloudflare í„°ë„ì„ í†µí•œ ì•ˆì „í•œ ì™¸ë¶€ ì ‘ê·¼

4.2 í™˜ê²½ ì„¤ì • (.env)
-------------------
í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜:
BITBUCKET_URL=https://bitbucket.org
BITBUCKET_USERNAME=hjm0830@midasit.com
BITBUCKET_ACCESS_TOKEN=ATATT3xFfGF0RgdX... (App Password)
BITBUCKET_WORKSPACE=mit_dev
BITBUCKET_REPOSITORY=egen_kr
OPENAI_API_KEY=sk-... (OpenAI API Key)

ì„ íƒ í™˜ê²½ë³€ìˆ˜:
OPENAI_MODEL=gpt-4o-mini (ê¸°ë³¸ê°’)
OPENAI_MAX_TOKENS=4000 (ê¸°ë³¸ê°’)
TEST_MODE=false (ê¸°ë³¸ê°’)

4.3 ì›¹í›… í˜ì´ë¡œë“œ êµ¬ì¡° (sample_jira_webhook.json)
-------------------------------------------------
{
  "webhookEvent": "jira:issue_created",
  "issue_event_type_name": "issue_created",
  "user": { "displayName": "...", ... },
  "issue": {
    "key": "SDB-123",
    "fields": {
      "issuetype": { "name": "SDB ê°œë°œ ìš”ì²­" },
      "summary": "ì‚¬ìš©ì ê´€ë¦¬ SDB ê¸°ëŠ¥ ê°œë°œ",
      "description": {
        "type": "doc",
        "version": 1,
        "content": [ ... ] # Atlassian Document Format
      }
    }
  }
}

4.4 Few-shot í•™ìŠµ ì˜ˆì œ (few_shot_examples.json)
-----------------------------------------------
SDB ê´€ë ¨ ì½”ë“œ íŒ¨í„´ í•™ìŠµì„ ìœ„í•œ ì˜ˆì œë“¤:
- UserRegistrationSDB í´ë˜ìŠ¤ ìƒì„±
- ProductSDBì— stockQuantity í•„ë“œ ì¶”ê°€
- OrderSDBì˜ validate() ë©”ì„œë“œ ê°•í™”

ì˜ˆì œ êµ¬ì¡°:
[
  {
    "input": "UserRegistrationSDB ìƒì„± ìš”ì²­",
    "output": "public class UserRegistrationSDB { ... }"
  }
]

================================================================================
5. ì—ëŸ¬ ì²˜ë¦¬ ë° ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜
================================================================================

5.1 ê³„ì¸µë³„ ì—ëŸ¬ ì²˜ë¦¬
-------------------
1. ì›¹í›… ë ˆë²¨ (app/main.py):
   - ì˜ëª»ëœ í˜ì´ë¡œë“œ: 400 Bad Request
   - JSON íŒŒì‹± ì‹¤íŒ¨: 400 Bad Request
   - ì´ë²¤íŠ¸ íƒ€ì… ë¶ˆì¼ì¹˜: 200 OK (ë¬´ì‹œ)
   - ì²˜ë¦¬ ì¤‘ ì˜ˆì™¸: 500 Internal Server Error

2. Bitbucket API ë ˆë²¨ (app/bitbucket_api.py):
   - 401 Unauthorized: "Bitbucket ì¸ì¦ ì‹¤íŒ¨. í† í°ì„ í™•ì¸í•˜ì„¸ìš”."
   - 403 Forbidden: "ê¶Œí•œ ë¶€ì¡±. í† í°ì— í•„ìš”í•œ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”."
   - 404 Not Found: "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
   - 429 Too Many Requests: "API í˜¸ì¶œ í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤."

3. OpenAI API ë ˆë²¨ (app/llm_handler.py):
   - RateLimitError: API ì‚¬ìš©ëŸ‰ í•œë„ ì´ˆê³¼
   - APITimeoutError: API íƒ€ì„ì•„ì›ƒ
   - APIError: ì¼ë°˜ì ì¸ API ì˜¤ë¥˜
   - ëª¨ë“  ì—ëŸ¬ ì‹œ Mock ëª¨ë“œë¡œ ìë™ ì „í™˜

4. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë ˆë²¨ (app/issue_processor.py):
   - íŒŒì¼ ì—†ìŒ: ê²½ê³  ë¡œê·¸ í›„ ê³„ì† ì§„í–‰
   - ë¸Œëœì¹˜ ìƒì„± ì‹¤íŒ¨: ì—ëŸ¬ ë°˜í™˜
   - ì»¤ë°‹ ì‹¤íŒ¨: ê°œë³„ íŒŒì¼ ì˜¤ë¥˜ë¡œ ì²˜ë¦¬
   - PR ìƒì„± ì‹¤íŒ¨: ê²½ê³  í›„ ë¶€ë¶„ ì„±ê³µ ë°˜í™˜

5.2 ë³µêµ¬ ì „ëµ
-------------
1. Graceful Degradation:
   - OpenAI API í‚¤ ì—†ìŒ â†’ Mock ëª¨ë“œ ìë™ ì „í™˜
   - Bitbucket í† í° ë¬´íš¨ â†’ ê²½ê³  í›„ ê³„ì† ì§„í–‰
   - ì¼ë¶€ íŒŒì¼ ì²˜ë¦¬ ì‹¤íŒ¨ â†’ ë‚˜ë¨¸ì§€ íŒŒì¼ì€ ì •ìƒ ì²˜ë¦¬

2. ì¬ì‹œë„ ë¡œì§:
   - HTTP ìš”ì²­ ì‹¤íŒ¨ ì‹œ ìµœëŒ€ 3íšŒ ì¬ì‹œë„
   - ì§€ìˆ˜ ë°±ì˜¤í”„: 1ì´ˆ, 2ì´ˆ, 4ì´ˆ ê°„ê²©
   - requests.exceptions.RequestException í¬ì°©

3. ë¶€ë¶„ ì„±ê³µ ì²˜ë¦¬:
   - ì²˜ë¦¬ëœ íŒŒì¼ê³¼ ì‹¤íŒ¨í•œ íŒŒì¼ êµ¬ë¶„ ê¸°ë¡
   - ì„±ê³µí•œ ë³€ê²½ì‚¬í•­ì€ ìœ ì§€
   - ì—ëŸ¬ ìƒì„¸ ì •ë³´ëŠ” ê²°ê³¼ì— í¬í•¨

4. ìƒì„¸ ë¡œê¹…:
   - ëª¨ë“  ì£¼ìš” ë‹¨ê³„ì—ì„œ INFO ë¡œê·¸
   - ì—ëŸ¬ ë°œìƒ ì‹œ ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤ í¬í•¨
   - ì²˜ë¦¬ ì‹œê°„ ë° ê²°ê³¼ ë©”íŠ¸ë¦­ ê¸°ë¡

================================================================================
6. ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ
================================================================================

6.1 ë¡œì»¬ ê°œë°œ í™˜ê²½ êµ¬ì¶•
----------------------
1. ì €ì¥ì†Œ í´ë¡ :
   git clone <repository-url>
   cd GenerateSDBAgent

2. í™˜ê²½ ì„¤ì •:
   cp .env.example .env
   # .env íŒŒì¼ í¸ì§‘í•˜ì—¬ ì‹¤ì œ í† í° ì…ë ¥

3. Docker ì‹¤í–‰:
   docker-compose up -d

4. í—¬ìŠ¤ì²´í¬:
   curl http://localhost:5000/health

5. ì›¹í›… í…ŒìŠ¤íŠ¸:
   curl -X POST http://localhost:5000/webhook \
        -H "Content-Type: application/json" \
        -d @sample_jira_webhook.json

6.2 í”„ë¡œë•ì…˜ ë°°í¬
-----------------
Railway.app ë°°í¬:
1. Railway ê³„ì • ì—°ë™
2. í™˜ê²½ë³€ìˆ˜ ì„¤ì • (Railway ëŒ€ì‹œë³´ë“œì—ì„œ)
3. git push origin main (ìë™ ë°°í¬)

Heroku ë°°í¬:
1. heroku create app-name
2. heroku config:set BITBUCKET_USERNAME=...
3. git push heroku main

Docker ì§ì ‘ ë°°í¬:
1. docker build -t sdb-agent .
2. docker run -d -p 5000:5000 --env-file .env sdb-agent

Cloudflare Tunnel ì‚¬ìš©:
docker-compose -f docker-compose.cloudflare.yml up -d

6.3 ëª¨ë‹ˆí„°ë§ ë° ìš´ì˜
-------------------
1. í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸:
   GET /health
   ì‘ë‹µ: {"status": "healthy", "timestamp": "...", "test_mode": false}

2. ë¡œê·¸ ëª¨ë‹ˆí„°ë§:
   docker logs -f <container-name>

3. ë©”íŠ¸ë¦­ ìˆ˜ì§‘:
   - ì›¹í›… ìˆ˜ì‹  íšŸìˆ˜
   - ì²˜ë¦¬ ì„±ê³µ/ì‹¤íŒ¨ ë¹„ìœ¨
   - í‰ê·  ì²˜ë¦¬ ì‹œê°„
   - API í˜¸ì¶œ ì‘ë‹µ ì‹œê°„

4. ì•Œë¦¼ ì„¤ì •:
   - í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨ ì‹œ ì•Œë¦¼
   - ì—ëŸ¬ìœ¨ ì„ê³„ì¹˜ ì´ˆê³¼ ì‹œ ì•Œë¦¼
   - API í† í° ë§Œë£Œ ì„ë°• ì‹œ ì•Œë¦¼

6.4 íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
--------------
ì¼ë°˜ì ì¸ ë¬¸ì œì™€ í•´ê²°ë°©ë²•:

1. "ì›¹í›… í˜ì´ë¡œë“œê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤":
   - Jira ì›¹í›… ì„¤ì • í™•ì¸
   - Content-Type: application/json í—¤ë” í™•ì¸

2. "Bitbucket ì¸ì¦ ì‹¤íŒ¨":
   - App Password ë§Œë£Œ í™•ì¸
   - ê¶Œí•œ ì„¤ì • í™•ì¸ (Repositories: Read/Write)

3. "OpenAI API í˜¸ì¶œ ì‹¤íŒ¨":
   - API í‚¤ ìœ íš¨ì„± í™•ì¸
   - ì‚¬ìš©ëŸ‰ í•œë„ í™•ì¸
   - Mock ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸

4. "ë¸Œëœì¹˜ ìƒì„± ì‹¤íŒ¨":
   - ì €ì¥ì†Œ ê¶Œí•œ í™•ì¸
   - ê¸°ì¤€ ë¸Œëœì¹˜(master/main) ì¡´ì¬ í™•ì¸

5. "PR ìƒì„± ì‹¤íŒ¨":
   - ë¸Œëœì¹˜ì— ì»¤ë°‹ ì¡´ì¬ í™•ì¸
   - ì¤‘ë³µ PR í™•ì¸

================================================================================
7. ê°œì„  ì œì•ˆì‚¬í•­
================================================================================

7.1 ë‹¨ê¸° ê°œì„ ì‚¬í•­ (1-2ì£¼)
-------------------------
1. ë¹„ë™ê¸° ì²˜ë¦¬ ë„ì…:
   - Celery + Redisë¥¼ í™œìš©í•œ ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì²˜ë¦¬
   - ì›¹í›… ì‘ë‹µ ì‹œê°„ ë‹¨ì¶• (í˜„ì¬ ë™ê¸° ì²˜ë¦¬ë¡œ ëŠë¦¼)

2. ì›¹í›… ë³´ì•ˆ ê°•í™”:
   - HMAC ì„œëª… ê²€ì¦ìœ¼ë¡œ ìœ„ì¡° ìš”ì²­ ì°¨ë‹¨
   - IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì ìš©

3. ìƒì„¸ ëª¨ë‹ˆí„°ë§:
   - Prometheus + Grafana ë©”íŠ¸ë¦­ ìˆ˜ì§‘
   - ì²˜ë¦¬ ì‹œê°„, ì„±ê³µë¥ , API ì‘ë‹µ ì‹œê°„ ëŒ€ì‹œë³´ë“œ

7.2 ì¤‘ê¸° ê°œì„ ì‚¬í•­ (1-2ê°œì›”)
--------------------------
1. C++ ì½”ë“œ ì§€ì› ê°•í™”:
   - C++ íŠ¹í™” Few-shot ì˜ˆì œ ì¶”ê°€
   - MIDAS NX ë„ë©”ì¸ ì§€ì‹ ë³´ê°•
   - ì»´íŒŒì¼ ê²€ì¦ ë¡œì§ ì¶”ê°€

2. ì½”ë“œ í’ˆì§ˆ í–¥ìƒ:
   - ìƒì„±ëœ ì½”ë“œì— ëŒ€í•œ ì •ì  ë¶„ì„ (SonarQube)
   - ì½”ë“œ ìŠ¤íƒ€ì¼ ê²€ì‚¬ ë° ìë™ í¬ë§·íŒ…
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìë™ ìƒì„±

3. ì›Œí¬í”Œë¡œìš° ì»¤ìŠ¤í„°ë§ˆì´ì§•:
   - í”„ë¡œì íŠ¸ë³„ ì²˜ë¦¬ ê·œì¹™ ì„¤ì •
   - ì´ìŠˆ íƒ€ì…ë³„ ë‹¤ë¥¸ ì²˜ë¦¬ ë¡œì§
   - ìŠ¹ì¸ í”„ë¡œì„¸ìŠ¤ ì¶”ê°€

7.3 ì¥ê¸° ê°œì„ ì‚¬í•­ (3-6ê°œì›”)
--------------------------
1. ë‹¤ì¤‘ ì €ì¥ì†Œ ì§€ì›:
   - ì—¬ëŸ¬ Bitbucket ì €ì¥ì†Œ ë™ì‹œ ê´€ë¦¬
   - GitHub, GitLab ì§€ì› í™•ì¥
   - ì €ì¥ì†Œ ê°„ ì˜ì¡´ì„± ê´€ë¦¬

2. AI ëª¨ë¸ ê³ ë„í™”:
   - ì½”ë“œ ë¦¬ë·° ìë™í™”
   - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìë™ ìƒì„±
   - ì„±ëŠ¥ ìµœì í™” ì œì•ˆ

3. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤:
   - ì›¹ ëŒ€ì‹œë³´ë“œ ê°œë°œ
   - ì‹¤ì‹œê°„ ì²˜ë¦¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§
   - ìˆ˜ë™ ê°œì… ê¸°ëŠ¥

7.4 ìš´ì˜ íš¨ìœ¨ì„± ê°œì„ 
-------------------
1. ì„¤ì • ê´€ë¦¬:
   - í™˜ê²½ë³„ ì„¤ì • íŒŒì¼ ë¶„ë¦¬
   - ì„¤ì • ë³€ê²½ ì‹œ ì¬ì‹œì‘ ì—†ì´ ë°˜ì˜
   - ì„¤ì • ìœ íš¨ì„± ê²€ì‚¬ ê°•í™”

2. ë¡œê·¸ ë° ë””ë²„ê¹…:
   - êµ¬ì¡°í™”ëœ ë¡œê¹… (JSON í¬ë§·)
   - ìš”ì²­ ì¶”ì ì„ ìœ„í•œ Correlation ID
   - ì—ëŸ¬ ë°œìƒ ì‹œ ìë™ ìŠ¤í¬ë¦°ìƒ·

3. ì„±ëŠ¥ ìµœì í™”:
   - LLM ì‘ë‹µ ìºì‹±
   - Bitbucket API í˜¸ì¶œ ìµœì í™”
   - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

================================================================================
ğŸ“Š ì„±ê³¼ ì§€í‘œ ë° ê¸°ëŒ€ íš¨ê³¼
================================================================================

ì •ëŸ‰ì  íš¨ê³¼:
- ê°œë°œ ìš”ì²­ ì²˜ë¦¬ ì‹œê°„: ìˆ˜ë™ 2-3ì¼ â†’ ìë™ 10-30ë¶„
- ì½”ë“œ ì¼ê´€ì„±: í‘œì¤€ íŒ¨í„´ ì ìš©ìœ¼ë¡œ í’ˆì§ˆ í–¥ìƒ
- ê°œë°œì ìƒì‚°ì„±: ë°˜ë³µ ì‘ì—… ìë™í™”ë¡œ 20-30% í–¥ìƒ

ì •ì„±ì  íš¨ê³¼:
- íœ´ë¨¼ ì—ëŸ¬ ê°ì†Œ
- í‘œì¤€í™”ëœ ê°œë°œ í”„ë¡œì„¸ìŠ¤ í™•ë¦½
- ê°œë°œìì˜ ì°½ì˜ì  ì—…ë¬´ ì§‘ì¤‘ ê°€ëŠ¥

================================================================================
ğŸ“ ê¸°ìˆ  ì§€ì› ë° ë¬¸ì˜
================================================================================

ê°œë°œíŒ€: MIDAS IT RPMì œí’ˆí˜ì‹ íŒ€
ë¬¸ì˜: hjm0830@midasit.com
ì €ì¥ì†Œ: Bitbucket mit_dev/GenerateSDBAgent
ë¬¸ì„œ ìœ„ì¹˜: /mnt/c/MIDAS/10_Source/GenerateSDBAgent/

ë²„ê·¸ ë¦¬í¬íŠ¸ ë° ê¸°ëŠ¥ ìš”ì²­:
1. Bitbucket Issues ë“±ë¡
2. ë¡œê·¸ íŒŒì¼ ì²¨ë¶€ (docker logs <container>)
3. ì¬í˜„ ë‹¨ê³„ ìƒì„¸ ê¸°ìˆ 

================================================================================
ğŸ“… ë³€ê²½ ì´ë ¥
================================================================================
2024-12-25: ì´ˆê¸° í”„ë¡œì íŠ¸ ë¶„ì„ ë° ë¬¸ì„œí™” ì™„ë£Œ
           - ì „ì²´ ì•„í‚¤í…ì²˜ ë¶„ì„
           - ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸ ë™ì‘ ë¶„ì„
           - ë°°í¬ ë° ìš´ì˜ ê°€ì´ë“œ ì‘ì„±

================================================================================
                                    ë¬¸ì„œ ë
================================================================================